# å‹¤å‹™è¡¨è‡ªå‹•ç”Ÿæˆã‚·ã‚¹ãƒ†ãƒ  - æ—¥æœ¬èªãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

PuLPã‚’ä½¿ç”¨ã—ãŸæ•°ç†æœ€é©åŒ–ã«ã‚ˆã‚‹ç—…é™¢é–“å‹¤å‹™å‰²ã‚Šå½“ã¦ã®è‡ªå‹•ç”Ÿæˆãƒ„ãƒ¼ãƒ«ã§ã™ã€‚

## ğŸ“ ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ§‹æˆ

### ğŸš€ [ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¬ã‚¤ãƒ‰](user-guide.md)

ã‚·ã‚¹ãƒ†ãƒ ã®è¨­å®šã¨ä½¿ç”¨æ–¹æ³•ã®åŒ…æ‹¬çš„ãªã‚¬ã‚¤ãƒ‰

**å«ã¾ã‚Œã‚‹å†…å®¹ï¼š**

- ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆã‚¬ã‚¤ãƒ‰
- è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®è©³ç´°èª¬æ˜
- ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
- ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°
- é«˜åº¦ãªä½¿ç”¨æ–¹æ³•ã¨ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

### ğŸ“š [API ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](api/)

ã‚³ã‚¢ãƒ‰ãƒ¡ã‚¤ãƒ³å‹ã®APIä»•æ§˜

**å«ã¾ã‚Œã‚‹å†…å®¹ï¼š**

- [ãƒ‰ãƒ¡ã‚¤ãƒ³å‹](api/domain-types.md) - Worker, Hospital, ShiftTypeç­‰ã®è©³ç´°

### ğŸ—ï¸ [ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](architecture/)

ã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆã¨å®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³

**å«ã¾ã‚Œã‚‹å†…å®¹ï¼š**

- [åˆ¶ç´„ã‚·ã‚¹ãƒ†ãƒ ](architecture/constraint-system.md) - ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãƒ™ãƒ¼ã‚¹åˆ¶ç´„ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
- [ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼](architecture/data-flow.md) - ã‚·ã‚¹ãƒ†ãƒ å†…ã®ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ã¨çµ±åˆãƒ‘ã‚¿ãƒ¼ãƒ³

## ğŸ¯ ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦

### ä¸»è¦æ©Ÿèƒ½

- **ãƒãƒ¼ãƒ‰åˆ¶ç´„ã¨ã‚½ãƒ•ãƒˆåˆ¶ç´„**: å¿…é ˆæ¡ä»¶ã¨æœ›ã¾ã—ã„æ¡ä»¶ã«ã‚ˆã‚‹æœ€é©åŒ–
- **Excelå‡ºåŠ›**: è¦‹ã‚„ã™ã„å‹¤å‹™è¡¨ã®ç”Ÿæˆ
- **è©³ç´°ãƒ¬ãƒãƒ¼ãƒˆ**: ãƒšãƒŠãƒ«ãƒ†ã‚£ã¨åˆ¶ç´„é•åã®è©³ç´°åˆ†æ
- **æŸ”è»Ÿãªè¨­å®š**: TOML/CSVå½¢å¼ã§ã®è¨­å®šç®¡ç†

### åˆ¶ç´„ã‚·ã‚¹ãƒ†ãƒ 

**ãƒãƒ¼ãƒ‰åˆ¶ç´„ï¼ˆå¿…é ˆï¼‰ï¼š**

- å„ç—…é™¢ãƒ»å„æ—¥ã«1äººã®å‹¤å‹™è€…å‰²ã‚Šå½“ã¦
- åŒæ—¥åŒæ™‚åˆ»ã®é‡è¤‡å‹¤å‹™ç¦æ­¢
- å‹¤å‹™å¸Œæœ›ã®ã€Œä¸å¯ã€æ¡ä»¶ã‚’å³å®ˆ
- å½“ç›´é–“éš”ã®æœ€å°å€¤ä¿è¨¼
- é éš”åœ°å‹¤å‹™åˆ¶é™

**ã‚½ãƒ•ãƒˆåˆ¶ç´„ï¼ˆæœ€é©åŒ–ç›®æ¨™ï¼‰ï¼š**

- å½“ç›´é–“éš”ã®æœ€å¤§åŒ–
- å‹¤å‹™å›æ•°ã®å‡ç­‰åŒ–
- æ›œæ—¥åˆ¥è² è·åˆ†æ•£
- å‹¤å‹™å¸Œæœ›ã®æœ€å¤§é™åæ˜ 

## ğŸ› ï¸ æŠ€è¡“ä»•æ§˜

### ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

- **ãƒ¢ã‚¸ãƒ¥ãƒ©ãƒ¼è¨­è¨ˆ**: ãƒ—ãƒ©ã‚°ã‚¤ãƒ³å½¢å¼ã®åˆ¶ç´„ã‚·ã‚¹ãƒ†ãƒ 
- **æœ€é©åŒ–ã‚¨ãƒ³ã‚¸ãƒ³**: PuLP + CBC ã‚½ãƒ«ãƒãƒ¼
- **ãƒ‡ãƒ¼ã‚¿å‡¦ç†**: TOML/CSV â†’ ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ« â†’ æœ€é©åŒ–å¤‰æ•°
- **å‡ºåŠ›å½¢å¼**: ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ï¼ˆRichï¼‰ã€Excelã€JSON

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹

- **10å‹¤å‹™è€… Ã— 5ç—…é™¢ Ã— 30æ—¥**: 2-10ç§’
- **20å‹¤å‹™è€… Ã— 10ç—…é™¢ Ã— 30æ—¥**: 30-120ç§’
- **å¤‰æ•°å‰Šæ¸›**: åˆæœŸç©ºé–“ã®5-15%ã¾ã§æœ€é©åŒ–

## ğŸ”„ ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

```mermaid
graph LR
    A[è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«] --> B[å…¥åŠ›èª­ã¿è¾¼ã¿]
    B --> C[å¤‰æ•°ç”Ÿæˆ]
    C --> D[åˆ¶ç´„é©ç”¨]
    D --> E[æœ€é©åŒ–å®Ÿè¡Œ]
    E --> F[çµæœå‡ºåŠ›]
```

1. **è¨­å®šèª­ã¿è¾¼ã¿**: TOML/CSVãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿å–å¾—
2. **å¤‰æ•°ç©ºé–“æ§‹ç¯‰**: å®Ÿè¡Œå¯èƒ½ãªå‰²ã‚Šå½“ã¦çµ„ã¿åˆã‚ã›ã‚’ç‰¹å®š
3. **åˆ¶ç´„ç”Ÿæˆ**: ãƒãƒ¼ãƒ‰ãƒ»ã‚½ãƒ•ãƒˆåˆ¶ç´„ã‚’ãƒ¢ãƒ‡ãƒ«ã«é©ç”¨
4. **æœ€é©åŒ–**: PuLPã‚½ãƒ«ãƒãƒ¼ã«ã‚ˆã‚‹è§£ã®æ¢ç´¢
5. **çµæœå‡ºåŠ›**: Excel/JSON/ã‚³ãƒ³ã‚½ãƒ¼ãƒ«å½¢å¼ã§å‡ºåŠ›

## ğŸ“– ä½¿ç”¨ä¾‹

### åŸºæœ¬å®Ÿè¡Œ

```bash
uv run -m src.cli.main \
  --year 2025 --month 10 \
  --specified-days data/specified-2025-10.toml \
  --preferences data/2025-10.csv \
  --xlsx output/schedule-2025-10.xlsx
```

### è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ä¾‹

**ç—…é™¢è¨­å®š (hospitals.toml)**

```toml
[[hospitals]]
name = "ä¸­å¤®ç—…é™¢"
is_remote = false
is_university = true

[[hospitals.demand_rules]]
shift_type = "å½“ç›´"
weekdays = ["é‡‘æ›œ", "åœŸæ›œ"]
frequency = "æ¯é€±"
```

**å‹¤å‹™å¸Œæœ› (preferences.csv)**

```csv
name,date,shift_type,preference
ç”°ä¸­åŒ»å¸«,2025-10-01,å½“ç›´,å¸Œæœ›
ä½è—¤åŒ»å¸«,2025-10-02,æ—¥å‹¤,ä¸å¯
```

## ğŸ¨ ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

### æ–°ã—ã„åˆ¶ç´„ã®è¿½åŠ 

```python
# src/constraints/c08_custom_rule.py
from .base import register
from .base_impl import ConstraintBase

class CustomRule(ConstraintBase):
    name = "ã‚«ã‚¹ã‚¿ãƒ åˆ¶ç´„"

    def apply(self, model, x, ctx):
        # åˆ¶ç´„ãƒ­ã‚¸ãƒƒã‚¯ã‚’å®Ÿè£…
        pass

register(CustomRule())
```

### çµ±åˆä¾‹

```python
# JSONå‡ºåŠ›ã‚’ä½¿ç”¨ã—ãŸå¤–éƒ¨ã‚·ã‚¹ãƒ†ãƒ çµ±åˆ
import subprocess
import json

result = subprocess.run([
    "uv", "run", "-m", "src.cli.main",
    "--json", ...
], capture_output=True, text=True)

schedule = json.loads(result.stdout)
# å¾Œç¶šå‡¦ç†...
```

## âš¡ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

### æ¨å¥¨äº‹é …

- æœˆæ¬¡å˜ä½ã§ã®æœ€é©åŒ–å®Ÿè¡Œ
- åˆ¶ç´„ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®æ®µéšçš„èª¿æ•´
- å¤§è¦æ¨¡ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã§ã®ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ

### ç›£è¦–æŒ‡æ¨™

- è§£æ±ºæ™‚é–“
- å¤‰æ•°æ•°ï¼ˆãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°å¾Œï¼‰
- ãƒšãƒŠãƒ«ãƒ†ã‚£ã‚¹ã‚³ã‚¢
- åˆ¶ç´„é•åæ•°

## ğŸ”§ é–‹ç™ºãƒ»ä¿å®ˆ

### å“è³ªç®¡ç†

```bash
# ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
uv run pytest

# å‹ãƒã‚§ãƒƒã‚¯
uv run mypy src/

# ã‚³ãƒ¼ãƒ‰å“è³ª
uv run ruff check src/
uv run ruff format src/
```

### ãƒ‡ãƒãƒƒã‚°

- ãƒšãƒŠãƒ«ãƒ†ã‚£ãƒ¬ãƒãƒ¼ãƒˆã®åˆ†æ
- åˆ¶ç´„é•åã®ç‰¹å®š
- æœ€å°ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã§ã®ãƒ†ã‚¹ãƒˆ

## ğŸ“‹ é–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«

### è‹±èªç‰ˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [English Documentation](../user-guide.md)
- [API Reference](../api/domain-types.md)
- [Architecture](../architecture/)

### è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«

- `config/hospitals.toml` - ç—…é™¢è¨­å®š
- `config/workers.toml` - å‹¤å‹™è€…è¨­å®š
- `data/` - æœˆæ¬¡ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚¡ã‚¤ãƒ«

### å®Ÿè¡Œãƒ•ã‚¡ã‚¤ãƒ«

- `src/cli/main.py` - ãƒ¡ã‚¤ãƒ³ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
- `src/constraints/` - åˆ¶ç´„å®Ÿè£…
- `src/optimizer/` - æœ€é©åŒ–ã‚¨ãƒ³ã‚¸ãƒ³

---

è©³ç´°ãªä½¿ç”¨æ–¹æ³•ã«ã¤ã„ã¦ã¯ã€å„ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®å°‚ç”¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ã”å‚ç…§ãã ã•ã„ã€‚
